{"version":3,"sources":["scripts/main.js"],"names":["start","document","querySelector","score","messageStart","messageLose","messageWin","textContent","cells","changed","getRandom","min","max","Math","round","random","sync","key","classList","add","check","addNumber","Object","values","every","cell","cellNum","moveLeft","a","b","i","j","moveRight","sumLeft","Number","sumRight","addEventListener","cellRotated","cellLines","moveUp","col","sumUp","moveDown","sumDown","checkLines","checkCol","some","remove","length","e","contains"],"mappings":"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","file":"main.680a6c03.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst start = document.querySelector('.start');\nconst score = document.querySelector('.game-score');\nconst messageStart = document.querySelector('.message-start');\nconst messageLose = document.querySelector('.message-lose');\nconst messageWin = document.querySelector('.message-win');\n\nscore.textContent = 0;\n\nconst cells = {\n  1: null,\n  2: null,\n  3: null,\n  4: null,\n  5: null,\n  6: null,\n  7: null,\n  8: null,\n  9: null,\n  10: null,\n  11: null,\n  12: null,\n  13: null,\n  14: null,\n  15: null,\n  16: null,\n};\n\nlet changed = true;\n\nfunction getRandom(min, max) {\n  return Math.round((min - 0.5) + Math.random() * (max - min + 1));\n}\n\nfunction sync() {\n  for (const key in cells) {\n    document.querySelector(`.cell_${key}`).textContent = cells[key];\n    document.querySelector(`.cell_${key}`).classList = `field-cell cell_${key}`;\n\n    if (cells[key]) {\n      document.querySelector(`.cell_${key}`)\n        .classList.add(`field-cell--${cells[key]}`);\n    }\n  }\n  check();\n}\n\nfunction addNumber() {\n  if (Object.values(cells).every((cell) => cell !== null)\n    || changed === false) {\n    return;\n  }\n\n  let cellNum = getRandom(1, 16);\n\n  while (cells[cellNum] !== null) {\n    cellNum = getRandom(1, 16);\n  }\n\n  if (getRandom(1, 10) > 1) {\n    cells[cellNum] = 2;\n  } else {\n    cells[cellNum] = 4;\n  }\n\n  changed = false;\n}\n\nstart.addEventListener('click', () => {\n  if (start.textContent === 'Start') {\n    addNumber();\n    changed = true;\n    addNumber();\n    sync();\n\n    changed = false;\n    start.textContent = 'Restart';\n    messageStart.classList.add('hidden');\n  } else {\n    for (const key in cells) {\n      cells[key] = null;\n\n      document.querySelector(`.cell_${key}`).classList\n        = `field-cell cell_${key}`;\n    }\n    changed = true;\n    addNumber();\n    changed = true;\n    addNumber();\n    sync();\n    score.textContent = 0;\n    messageLose.classList.add('hidden');\n    changed = true;\n  }\n});\n\nfunction moveLeft(a, b) {\n  for (let i = a; i <= b; i++) {\n    if (cells[i] === null) {\n      for (let j = i; j <= b; j++) {\n        if (cells[j] !== null) {\n          cells[i] = cells[j];\n          cells[j] = null;\n          changed = true;\n          break;\n        }\n      }\n    }\n  }\n}\n\nfunction moveRight(a, b) {\n  for (let i = b; i >= a; i--) {\n    if (cells[i] === null) {\n      for (let j = i; j >= a; j--) {\n        if (cells[j] !== null) {\n          cells[i] = cells[j];\n          cells[j] = null;\n          changed = true;\n          break;\n        }\n      }\n    }\n  }\n}\n\nfunction sumLeft(a, b) {\n  for (let i = a; i < b; i++) {\n    if (cells[i] === cells[i + 1] && cells[i] !== null) {\n      cells[i + 1] = cells[i] + cells[i + 1];\n      cells[i] = null;\n      score.textContent = Number(score.textContent) + cells[i + 1];\n    }\n  }\n\n  moveLeft(a, b);\n}\n\nfunction sumRight(a, b) {\n  for (let i = b; i > a; i--) {\n    if (cells[i] === cells[i - 1] && cells[i] !== null) {\n      cells[i - 1] = cells[i] + cells[i - 1];\n      cells[i] = null;\n      score.textContent = Number(score.textContent) + cells[i - 1];\n    }\n  }\n\n  moveRight(a, b);\n}\n\nconst cellRotated = [\n  [1, 5, 9, 13],\n  [2, 6, 10, 14],\n  [3, 7, 11, 15],\n  [4, 8, 12, 16],\n];\n\nconst cellLines = [\n  [1, 4],\n  [5, 8],\n  [9, 12],\n  [13, 16],\n];\n\nfunction moveUp() {\n  for (let col = 0; col <= 3; col++) {\n    for (let i = 0; i <= 3; i++) {\n      if (cells[cellRotated[col][i]] === null) {\n        for (let j = i; j <= 3; j++) {\n          if (cells[cellRotated[col][j]] !== null) {\n            cells[cellRotated[col][i]] = cells[cellRotated[col][j]];\n            cells[cellRotated[col][j]] = null;\n            changed = true;\n            break;\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction sumUp() {\n  for (let col = 0; col <= 3; col++) {\n    for (let i = 0; i <= 3; i++) {\n      if (cells[cellRotated[col][i]] === cells[cellRotated[col][i + 1]]\n        && cells[cellRotated[col][i]]) {\n        cells[cellRotated[col][i + 1]] = cells[cellRotated[col][i]]\n          + cells[cellRotated[col][i + 1]];\n        cells[cellRotated[col][i]] = null;\n\n        score.textContent = Number(score.textContent)\n          + cells[cellRotated[col][i + 1]];\n      }\n    }\n  }\n  moveUp();\n}\n\nfunction moveDown() {\n  for (let col = 0; col <= 3; col++) {\n    for (let i = 3; i >= 0; i--) {\n      if (cells[cellRotated[col][i]] === null) {\n        for (let j = i; j >= 0; j--) {\n          if (cells[cellRotated[col][j]] !== null) {\n            cells[cellRotated[col][i]] = cells[cellRotated[col][j]];\n            cells[cellRotated[col][j]] = null;\n            changed = true;\n            break;\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction sumDown() {\n  for (let col = 0; col <= 3; col++) {\n    for (let i = 3; i >= 0; i--) {\n      if (cells[cellRotated[col][i]]\n        === cells[cellRotated[col][i - 1] && cells[cellRotated[col][i]]]) {\n        cells[cellRotated[col][i - 1]] = cells[cellRotated[col][i]]\n          + cells[cellRotated[col][i - 1]];\n        cells[cellRotated[col][i]] = null;\n\n        score.textContent = Number(score.textContent)\n          + cells[cellRotated[col][i - 1]];\n      }\n    }\n  }\n  moveDown();\n}\n\nfunction checkLines(a, b) {\n  for (let i = a; i < b; i++) {\n    if (cells[i] === cells[i + 1]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction checkCol() {\n  for (let col = 0; col <= 3; col++) {\n    for (let i = 3; i >= 0; i--) {\n      if (cells[cellRotated[col][i]] === cells[cellRotated[col][i - 1]]) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction check() {\n  if (Object.values(cells).some((cell) => cell === '2048')) {\n    messageWin.classList.remove('hidden');\n  }\n\n  if (Object.values(cells).every((cell) => cell !== null)) {\n    for (let i = 0; i < cellLines.length; i++) {\n      if (checkLines(cellLines[i][0], cellLines[i][1])) {\n        return;\n      }\n    }\n\n    if (checkCol() === false) {\n      messageLose.classList.remove('hidden');\n    }\n  }\n}\n\ndocument.addEventListener('keydown', e => {\n  switch (e.key) {\n    case 'ArrowUp':\n      if (!messageStart.classList.contains('hidden')) {\n        break;\n      }\n      moveUp();\n      sumUp();\n      addNumber();\n      sync();\n      break;\n    case 'ArrowDown':\n      if (!messageStart.classList.contains('hidden')) {\n        break;\n      }\n      moveDown();\n      sumDown();\n      addNumber();\n      sync();\n      break;\n    case 'ArrowLeft':\n      if (!messageStart.classList.contains('hidden')) {\n        break;\n      }\n\n      for (let i = 0; i < cellLines.length; i++) {\n        moveLeft(cellLines[i][0], cellLines[i][1]);\n        sumLeft(cellLines[i][0], cellLines[i][1]);\n      }\n      addNumber();\n      sync();\n      break;\n    case 'ArrowRight':\n      if (!messageStart.classList.contains('hidden')) {\n        break;\n      }\n\n      for (let i = 0; i < cellLines.length; i++) {\n        moveRight(cellLines[i][0], cellLines[i][1]);\n        sumRight(cellLines[i][0], cellLines[i][1]);\n      }\n      addNumber();\n      sync();\n      break;\n  }\n});\n"]}